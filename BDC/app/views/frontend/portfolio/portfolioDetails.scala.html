@(portfolio:Option[PortfolioMaster],programList :Seq[PortfolioPrograms])(implicit session: play.api.mvc.Session,lang:Lang,req : play.api.mvc.RequestHeader)
@frontend.layout()
@import services._
@import utils._
@import play.api.i18n._
@import play.api._
<link rel="stylesheet" href="@routes.Assets.at("frontend/stylesheets/jquery-ui.css")">
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://www.pureexample.com/js/flot/excanvas.min.js"></script><![endif]-->
<style type="text/css" media="screen">
    th.ui-th-column div{
        white-space:normal !important;
        height:auto !important;
        padding:2px;
    }
    
    /* set the size of the datepicker search control for Order Date*/
    #ui-datepicker-div { font-size:11px; }
        
    /* set the size of the autocomplete search control*/
    .ui-menu-item {
        font-size: 11px;
    }

    .ui-autocomplete {
        font-size: 11px;
    } 
    
    .ui-dialog .ui-dialog-title {
    float: left;
    margin: .1em 16px .1em 0;
    text-align: center;
    width: 100%;
}    
</style>
</head>
<body>
@frontend.topLayout()
<div class="main">
@*@if(UserAuthentication.IsAuthenticatedAdmin(session.get("utype").get)){
	<div class="width_full" id="new-auth" style="border:1px solid red;">hello</div>
}*@
@frontend.header()
<section class="slider" id="program-details">
<input id="program" value="@portfolio.get.id" class="display-none"/>
<input id="projectId" value="" class="display-none"/>
<input id="project_id" value="" class="display-none"/>
<input id="projectDetails" value="" class="display-none"/>
<input type="hidden" id="user_profile_id" @if(!session.get("user_profile").isEmpty) {value="@session.get("user_profile").get"}>
<div class="product_main">
  <div class="product_detail_1">
  
   	<h3 id="productNm" class="parent-new-h3">
    	<span class="parent-icon"> &#60; </span>
	  	<a href="/portfolio">
	  		<span class="left"> Lista de Portfolios</span>
  	  	</a>
  	  	
  	  	@if(ProgramService.permisosPrograma(portfolio.get.id.get.toString,session.get("uId").get)==1){
	  	  	<a href="/edit-program/@portfolio.get.id" style="float:right;margin-right: 12px;">
		 		<span class="edit-project edit-icon edit-text">@Messages("programDetails.edit") </span>
		 	</a>
	 	}
		@*<a href="@controllers.Frontend.routes.Program.exportToExcel(portfolio.get.id.get.toString())" class="exportToexcel">
	  		<span > Export to excel </span>
  	  	 </a>*@
   </h3>
   <h3 id="productNm">
	    <a href="javascript:toggleDiv('program-detail');"><span class="left font13px" style="width:930px;   word-wrap: break-word;">@portfolio.get.name </span></a>
   </h3>
  <div class="width_full" id="program-detail">
  	
  	<ul style="width: 290px;float:left;  border-right: 1px dashed #666666; min-height:100px;">
  		<li>
  			<div class="width_full" style="margin:5px 0 10px;padding-left: 8px;">
		  <span class="program-desc-label">Descripción del Portfolio</span>
		  	
			<span class="program-desc">@portfolio.get.name</span>
		  </div>
		</li>
  	</ul>

	  <ul style="width: 290px;float:left;  border-right: 1px dashed #666666; min-height:100px;">
		  <li>
			  <div class="width_full" style="margin:5px 0 10px;padding-left: 8px;">
				  <span class="program-desc-label">Lider</span>

				  <span class="program-desc">@portfolio.get.lider</span>
			  </div>
		  </li>
	  </ul>

	  <ul style="width: 290px;float:left;  border-right: 1px dashed #666666; min-height:100px;">
		  <li>
			  <div class="width_full" style="margin:5px 0 10px;padding-left: 8px;">
				  <span class="program-desc-label">Estado</span>

				  <span class="program-desc">@portfolio.get.state</span>
			  </div>
		  </li>
	  </ul>


  	</div>


		
	@if(utils.UserAccess.checkAccess(req,"project_listing")){
	 	<h3 id="productNm">
		   <span class="left">Programas</span>
	    </h3>
	    
	    @if(utils.UserAccess.checkAccess(req,"project_add")){
		    <div class="program-div" id="new-program">
		   		<span><a href="/add-new-project/@portfolio.get.id">Nuevo Programa </a></span>
			</div>
		}
	  	<!-- Project Listing  -->
		 	@if(programList.size>0){
			<div class="project_list">
			  <h3 class="title" style="width: 98.2%">
			  	<span style="width: 285px;float:left">Nombre Programa</span>
				<span style="width: 100px;float:left">Proyectos</span>
				<span style="width: 142px;float:left">Estado </span>
				<span style="width: 100px;float:left">Acción </span>
			  </h3>
			  	<div class="project_list_1  padding-none">
			    	<div class="design_team_left_detail_1_left " id="container">
			   		    @for(p <- PortfolioService.findProgramsListForPortfolio(portfolio.get.id.get, session.get("uId").get)){
					    		<div class="project_list_1">
					    			<a href="/program-details/@p.program_id.get" class="left">
					        		<span style="width: 285px;float:left" id="pr_@p.program_id.get"> @p.program_name  </span>
									<span style="width: 100px;float:left">@p.proyectos</span>
									<span style="width: 142px;float:left">@p.workflow_status</span>
				        			</a>

				        			@if(utils.UserAccess.checkAccess(req,"project_delete")){
					        			<span class="center" >
				              				<span class="delete_icon-project" id="m_@p.program_id"></span>
					            		</span>
				            		}
					      		</div>
				      	}
			    </div>
			    </div>
			 </div>
			
		 }
	 }
	 
	 <!--<div class="width_full">-->
	     	@if(programList.size!=0 && utils.UserAccess.checkAccess(req,"project_gantt")){
     			<!--<div class="width_full">-->
				    <h3 class="header-background" id="task-gantt-label">
					<a href="javascript:toggleDiv('project-gantt');"><span class="left" style="padding: 5px;">@Messages("programdetails.ganttchartview")</span></a>
				    </h3>
				<!--</div>-->
				<div class="width_full" id="project-gantt">
				</div>
			}
      <!--</div>-->

  </div>
</div>	 
@frontend.headerScripts()	
<script src="@routes.Assets.at("frontend/highcharts/highcharts.js")"></script>
<script src="@routes.Assets.at("frontend/highcharts/highcharts-more.js")"></script>
<script src="@routes.Assets.at("frontend/highcharts/modules/exporting.js")"></script>
<script type="text/javascript" src="@routes.Assets.at("frontend/js/main.js")"></script>
<link rel="stylesheet" href="@routes.Assets.at("frontend/jquery-ui-1.12.1/jquery-ui.css")">
<link rel="stylesheet" href="@routes.Assets.at("frontend/jqgrid/css/ui.jqgrid.css")">
<script src="@routes.Assets.at("frontend/jqgrid/js/i18n/grid.locale-es.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("frontend/jqgrid/js/jquery.jqGrid.min.js")" type="text/javascript"></script>
<link rel="stylesheet" href="@routes.Assets.at("frontend/stylesheets/documents.css")">
<script src="@routes.Assets.at("frontend/js/documents.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("frontend/js/jquery.mask.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("frontend/js/jquery.simplePagination.js")" type="text/javascript"></script>
<link rel="stylesheet" href="@routes.Assets.at("frontend/stylesheets/matrix.css")">
<script type="text/javascript">
	function toggleDiv(divId) {
	   $("#"+divId).toggle();
	}
	function validatePositive(value, column) {
		if ( isNaN(value) && value < 0)
			return [false, "Por favor ingrese un valor positivo."];
        else
            return [true, ""];
    }

	$(document).ready( function() {
		console.log("Aloha:"+@programList.size);



		
		@if(programList.size!=0 ){
			renderProjectGanttChart();
		}
		


	    
});
</script>
</body>	
</html>
