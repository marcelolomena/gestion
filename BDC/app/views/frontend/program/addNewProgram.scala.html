@(programForm: Form[Programs],
program_code:String,
userMap: java.util.HashMap[String,String],
divisionMap: java.util.HashMap[String,String],
programSubType: java.util.HashMap[String,String],
programType: java.util.HashMap[String,String],
workflowStatus: java.util.HashMap[String,String],
impactTypeMap: java.util.HashMap[String,String]
)(implicit session: play.api.mvc.Session,lang: Lang, req : play.api.mvc.RequestHeader)
@frontend.chanlayout()
@import helper._
@import services._
@import java.util.Date._
<style type="text/css">
@@media screen and (max-width: 1024px){
.main{margin: 0px 0 0 200px;}
}
#flot-placeholder{width:650px;height:auto;}
.ui-autocomplete-loading {
    background: white url("assets/images/ui-anim_basic_16x16.gif") right center no-repeat;
  }
.ui-autocomplete {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  float: left;
  display: none;
  min-width: 160px;
  _width: 160px;
  padding: 4px 0;
  margin: 2px 0 0 0;
  list-style: none;
  background-color: #ffffff;
  border-color: #ccc;
  border-color: rgba(0, 0, 0, 0.2);
  border-style: solid;
  border-width: 1px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding;
  background-clip: padding-box;
  *border-right-width: 2px;
  *border-bottom-width: 2px;

  .ui-menu-item > a.ui-corner-all {
    display: block;
    padding: 3px 15px;
    clear: both;
    font-weight: normal;
    line-height: 18px;
    color: #555555;
    white-space: nowrap;

    &.ui-state-hover, &.ui-state-active {
      color: #ffffff;
      text-decoration: none;
      background-color: #0088cc;
      border-radius: 0px;
      -webkit-border-radius: 0px;
      -moz-border-radius: 0px;
      background-image: none;
    }
  }
}
</style>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://www.pureexample.com/js/flot/excanvas.min.js"></script><![endif]-->
</head>
<body>
@frontend.topLayout()
<div class="main">
	@frontend.header()
	<section class="slider" id="pDetail_page">
		<div class="product_main" style="   float: left; height: auto; overflow: hidden;">
			<div id="new_program_header" class="">
				<p>@Messages("addNewProgram.title")</p>
			</div>
			<input id="p_code" type="hidden" value="@program_code"/>
    		<div>
    			@form(action = controllers.Frontend.routes.Program.saveNewProgram,  'id->"add-new-program-form") {
    				<input type="hidden" name="system_code" id="system_code" value="00" />
    				<input type="hidden" name="internal_number" id="internal_number" value="00" />
    				<input type="hidden" name="projects_numbers" id="projects_numbers" value="0" />
    				<input type="hidden" name="pLevel" id="pLevel" value="00" />
    				<input type="hidden" name="demand_management_status" id="demand_management_status" value="Initiativa OK" />
    				<input type="hidden" name="program_details.state_gantt" id="program_details.state_gantt" value="NA" />
    				<input type="hidden" name="program_dates.baseline_date" id="program_dates.baseline_date" value="@(new java.util.Date().format("dd-MM-yyyy"))" />
    				<input type="hidden" name="program_dates.closing_date_gantt" id="program_dates.closing_date_gantt" value="@(new java.util.Date().format("dd-MM-yyyy"))" />
    				<input type="hidden" name="program_code" id="program_code" value="" />
           			<input type="hidden" name="program_details.business_line" value="Not Needed" />
           			<input type="hidden" name="program_details.total_sap" value="100" />
           			<input type="hidden" name="program_details.completion_percentage" id="program_details.completion_percentage" value="0" />
           			<input type="hidden" name="program_manager" value="1" />

    				<div class="left width_full">
	    				<div class="left width-pr50 padding-top-3px" >
	    					 @select(
						         programForm("program_type"),
						         options(programType),
						         'class -> "input-xlarge ",
						         '_label -> Messages("addNewProgram.programType"),
						          '_default -> Messages("addNewProgram.placeholder.program_type")
						      )
	           			</div>
	           		
	           			<div class="right width-pr50 padding-top-3px" >
	           				@inputText(
				                programForm("program_name"),
				                'class -> "span4", 
				                '_label -> Messages("addNewProgram.programName"),
				                'placeholder -> Messages("addNewProgram.placeholder.program_name")
				                
				            )
	           			</div>
           			</div>

           			<div class="left width_full">
	           			<div class="left width-pr50 padding-top-3px" >
	           			<span class="left width_full">
	           				 @select(
						         programForm("program_sub_type"),
						         options(programSubType),
						         'class -> "input-xlarge ",
						         '_label -> Messages("addNewProgram.programSubType"),
						          '_default -> Messages("addNewProgram.placeholder.program_sub_type")
						      )
					    </span>
					    <span class="left width_full padding-top-3px">
						      	@select(
								         programForm("demand_manager"),
								         options(userMap),
								         'class -> "input-xlarge ",
								         '_label -> Messages("addNewProgram.DemandManager"),
								         '_default -> Messages("addNewProgram.placeholder.demand_manager")
						      	)
					    </span>
						<span class="left width_full padding-top-3px">
							@select(
							 programForm("clasificacion"),
							 options("Evolutivo"->"Evolutivo", "Corrección"->"Corrección","Normativo"->"Normativo", "Obsolecencia Tecnologica"->"Obsolecencia Tecnologica", "Infraestructura"->"Infraestructura"),
							 'class -> "input-xlarge ",
							 '_label -> Messages("addNewProgram.clasificacion"),
							  '_default -> Messages("addNewProgram.placeholder.clasificacion")
						  )
						</span>
	           			</div>
	           			<div class="right width-pr50 padding-top-3px" >
	           				<span class="left width_full ">
	           				@textarea(
				                programForm("program_description"),
				                'class -> "span4", 
				                '_label -> Messages("addNewProgram.description"),
				                'placeholder -> Messages("addNewProgram.placeholder.program_description"),
							    'rows -> 7,
							    'cols -> 60
				            )
				            </span>
	           			</div>
           			</div>
           			
           			<div class="left width_full">
					   <div class="left width-pr50 padding-top-3px" >
							@select(
								 programForm("program_details.devison"),
								 options(divisionMap),
								 'class -> "input-xlarge ",
								 '_label -> Messages("addNewProgram.requestingDivision"),
								 '_default -> Messages("addNewProgram.placeholder.devison")  
							  )
					   </div>					
           			
	           			<div class="right width-pr50 padding-top-3px" >
	           					@inputText(
				                programForm("program_dates.initiation_planned_date"),
				                'class -> "span4", 
				                '_label -> Messages("addNewProgram.programInitiation"),
				                'placeholder -> Messages("addNewProgram.placeholder.initiation_planned_date")
				            )
	           			</div>
           			</div>

           			<div class="left width_full">
						<div class="left width-pr50 padding-top-3px">
							@inputText(
							programForm("coco"),
							'class -> "span4",
							'_label -> "Responsable",
							'placeholder -> "Responsable"
							)
						</div>

	           			<div class="right width-pr50 padding-top-3px" >
	           				@inputText(
				                programForm("program_dates.release_date"),
				                'class -> "span4", 
				                '_label -> Messages("addNewProgram.expectedreleasedate"),
				                'placeholder ->Messages("addNewProgram.placeholder.release_date")
				            )
	           			</div>
           			</div>
           		<div class="left width_full ">
	           			<div class="left width-pr50 padding-top-3px">
	           			@inputText(
				                programForm("planned_hours"),
				                '_label -> Messages("addNewProgram.plannedhours"),
				                'class -> "span4", 
				                'maxlength ->"9",
				                'placeholder ->Messages("addNewProgram.Enterplannedhours")
				            )
	           			</div>			
	           			<div class="left width-pr50 padding-top-3px display-none" >
	           				@inputText(
				                programForm("program_dates.creation_date"),
				                'class -> "span4", 
				                '_label -> Messages("addNewProgram.programCreation"),
				                'placeholder -> Messages("addNewProgram.placeholder.end_planned_date")
				            )
	           			</div>						
	           			<div class="right width-pr50 padding-top-3px" >
	           				@inputText(
				                programForm("program_dates.closure_date"),
				                'class -> "span4", 
				                '_label -> Messages("addNewProgram.estimatedClosureDate"),
				                'placeholder -> Messages("addNewProgram.placeholder.closure_date"),
				                'style->"width: 380px;"
				            )
	           			</div>	 										
	           			
           			</div>
					<div class="left width_full ">
	          			<div class="left width-pr50 padding-top-3px" >
	    					 @select(
						         programForm("program_details.impact_type"),
						         options(impactTypeMap),
						         'class -> "input-xlarge ",
						         '_label -> Messages("addNewProgram.impactType"),
						          '_default -> Messages("addNewProgram.placeholder.impact_type")
						      )
	           			</div>         				           			
						<div class="right width-pr50 padding-top-3px" >
							@select(
							 programForm("internal_state"),
							 options("Menor"->"Menor", "SAP"->"SAP","CIG"->"CIG", "Directorio"->"Directorio"),
							 'class -> "input-xlarge ",
							 '_label -> Messages("addNewProgram.internal_state"),
							  '_default -> Messages("addNewProgram.placeholder.internal_state")
						  )
						</div>	           			
	           			         			
          			
           			</div>
					<div class="left width_full ">
           				<div class="left width-pr50 padding-top-3px" >
	    				 @select(
						        programForm("work_flow_status"),
						         options(workflowStatus),
						         'class -> "input-xlarge ",
						         '_label -> Messages("addNewProgram.workFlowStatus"),
						          '_default -> Messages("addNewProgram.placeholder.work_flow_status")
					      )
	          			</div>							
					</div>
           			<div class="left width_full padding-top-3px" >
           				<label style="width:100%; text-align:center;">@Messages("artform.mandatorynote")</label>
           			</div>
           			
           		
           			<div class="width_full" style="margin-top:26px;">
				       		<span class="left" style="margin-left:312px;"><input class="btn form-button" value="@Messages("button.save")" type="submit"/></span>
				       		<span  class="left" style="margin-left:30px;"><input id="cancel-program" class="btn form-button" value="@Messages("button.cancel")" type="button"/></span>
		          	</div>
          
    			}
    		</div>
		</div>
  		@frontend.footer()
	</section>
</div>
<div id="pop-box-over" class="display-none"></div>
<div id="dialog-box" class="product-detail-dialog" style="width:190px;">
	<span class="dialog-close"></span>
	<div class="dialog-content"></div>
</div> 
<div class="tooltip"></div>
@frontend.headerScripts()
<link rel="stylesheet" href="@routes.Assets.at("frontend/jquery-ui-1.12.1/jquery-ui.min.css")">
<script type="text/javascript" src="@routes.Assets.at("frontend/js/main.js")"></script>
<script type="text/javascript">
	$(document).ready(
			function() {

				var currentDate = $("#current-date").val();

                $("#estimated_cost_field").addClass("display-none");

				$("#program_code").val($("#p_code").val());
				$('#cancel-program').on('click', function() {
					window.location.href = '/programs';
				});

			     $("#program_details_sap_code").keydown(function (e) {
			 		  if ((!e.shiftKey && !e.ctrlKey && !e.altKey) && ((e.keyCode >= 48 && e.keyCode <= 57) ||
			 	                (e.keyCode >= 96 && e.keyCode <= 105))) {
			 	          }
			 	          else if (e.keyCode != 8 && e.keyCode != 46 && e.keyCode != 37 && e.keyCode != 39 &&
			 	                       e.keyCode != 9) {
			 	              e.preventDefault();
			 	          }
			 	    });
			 	    
			       $("#planned_hours").keydown(function (e) {
			 		  if ((!e.shiftKey && !e.ctrlKey && !e.altKey) && ((e.keyCode >= 48 && e.keyCode <= 57) ||
			 	                (e.keyCode >= 96 && e.keyCode <= 105))) {
			 	          }
			 	          else if (e.keyCode != 8 && e.keyCode != 46 && e.keyCode != 37 && e.keyCode != 39 &&
			 	                       e.keyCode != 9) {
			 	              e.preventDefault();
			 	          }
			 	    });

				$("#program_dates_initiation_planned_date").datepicker({
					buttonImageOnly : true,
					dateFormat : "dd-mm-yy",
					changeMonth : true,
					changeYear : true
				});

				$("#program_dates_creation_date").datepicker({
					buttonImageOnly : true,
					dateFormat : "dd-mm-yy",
					maxDate : currentDate,
					changeMonth : true,
					changeYear : true
				});

				if ($("#program_dates_creation_date").val() == null
						|| $("#program_dates_creation_date").val() == "") {
					$("#program_dates_creation_date").datepicker("setDate",
							new Date());
				}
				$("#program_dates_release_date").datepicker({
							buttonImageOnly : true,
							dateFormat : "dd-mm-yy",
							minDate : currentDate,
							changeMonth : true,
							changeYear : true,
							onSelect : function() {
								var minDate = $(this).datepicker('getDate');
								minDate.setDate(minDate.getDate());
								var minReleaseDate = new Date(Date.parse($("#program_dates_release_date").val()));
								$("#program_dates_closure_date").datepicker("option", "minDate", minDate);
							}
						});

				$("#program_dates_baseline_date").datepicker({
					buttonImageOnly : true,
					dateFormat : "dd-mm-yy",
					changeMonth : true,
					changeYear : true
				});

				$("#program_dates_closing_date_gantt").datepicker({
					buttonImageOnly : true,
					dateFormat : "dd-mm-yy",
					changeMonth : true,
					changeYear : true
				});

				$("#program_dates_closure_date").datepicker({
					buttonImageOnly : true,
					dateFormat : "dd-mm-yy",
					changeMonth : true,
					changeYear : true
				});

				$('#ui-datepicker-div').addClass('display-none');


				$( "#coco" )
					  .autocomplete(
					  {
							source: function(request, response){
									$.ajax({
										type: "GET",
										url: "/addResponsible",
										data: request,
										dataType: "json",
										success: function( data ) {
											response( data );
										},
										error: function(model, response, options) {
											response([]);
										}
									});
								},
								  select: function(event, ui) {
									event.preventDefault();
									$("#coco").val(ui.item.label);
									console.log(ui.item.value)
								  },
					  }
					  );
			});

    function isNumberKey(evt){
	    var charCode = (evt.which) ? evt.which : event.keyCode;
	    
	    if(document.getElementById("planned_hours").value.indexOf('.') === -1){
	        return (charCode<=31 ||  charCode==46 || (charCode>=48 && charCode<=57));
		    }else{
		        return (charCode<=31 || (charCode>=48 && charCode<=57));
			}
		}
</script>
</body>
</html>
	