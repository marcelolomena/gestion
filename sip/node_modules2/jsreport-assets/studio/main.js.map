{"version":3,"sources":["webpack:///webpack/bootstrap 401f43e400a8d6437c1f","webpack:///./studio/main_dev.js","webpack:///./studio/AssetEditor.js","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/AssetUploadButton.js","webpack:///external \"Studio\"","webpack:///external \"Studio.libraries['superagent']\"","webpack:///external \"Studio.libraries['bluebird']\"","webpack:///./studio/NewAssetModal.js","webpack:///./studio/AssetProperties.js"],"names":["addEntitySet","name","faIcon","visibleName","onNew","openModal","addEditorComponent","addToolbarComponent","addPropertiesComponent","title","entity","__entitySet","entityTreeIconResolvers","push","parts","split","length","extension","getTextFromApi","path","resolve","reject","request","get","resolveUrl","end","err","text","Error","toString","FileEditor","state","isMetaView","props","content","link","loadFailed","saveEntity","_id","api","parseJSON","btoa","setState","prevProps","message","match","onUpdate","downloadUrl","mode","isSharedHelper","textTransform","isImage","OpenUpload","openEditor","overflow","Date","getTime","display","margin","atob","forceUpdate","v","Object","assign","_fileUploadButton","AssetUploadButton","e","target","files","file","reader","FileReader","onloadend","refs","value","type","workspaces","save","post","data","result","substring","indexOf","response","addExistingEntity","openTab","updateEntity","tab","patch","loadEntity","onerror","alert","readAsDataURL","dispatchEvent","MouseEvent","window","upload","renderUpload","openFileDialog","NewAssetModal","isLink","error","close","color","OpenUploadNew","createAsset","propTypes","func","isRequired","AssetProperties","onChange","checked","entities"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 401f43e400a8d6437c1f\n **/","import AssetEditor from './AssetEditor.js'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport NewAssetModal from './NewAssetModal.js'\r\nimport AssetProperties from './AssetProperties.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nStudio.addEntitySet({\r\n  name: 'assets',\r\n  faIcon: 'fa-file',\r\n  visibleName: 'asset',\r\n  onNew: () => Studio.openModal(NewAssetModal)\r\n})\r\n\r\nStudio.addEditorComponent('assets', AssetEditor)\r\nStudio.addToolbarComponent(AssetUploadButton)\r\nStudio.addPropertiesComponent(AssetProperties.title, AssetProperties, (entity) => entity.__entitySet === 'assets')\r\n\r\nStudio.entityTreeIconResolvers.push((entity) => {\r\n  if (entity.__entitySet !== 'assets') {\r\n    return\r\n  }\r\n\r\n  const parts = entity.name.split('.')\r\n\r\n  if (parts.length === 1) {\r\n    return\r\n  }\r\n\r\n  const extension = parts[parts.length - 1]\r\n\r\n  switch (extension) {\r\n    case 'html': return 'fa-html5'\r\n    case 'jpg':\r\n    case 'jpeg':\r\n    case 'png':\r\n    case 'gif':\r\n    case 'svg': return 'fa-camera'\r\n    case 'js': return 'fa-cog'\r\n    case 'css': return 'fa-css3'\r\n  }\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport Studio, { TextEditor } from 'jsreport-studio'\r\nimport superagent from 'superagent'\r\nimport Promise from 'bluebird'\r\n\r\n// Studio.api currently always open dialogs on failures and that is what we don't want, so arbitrary implementaiton here\r\nconst getTextFromApi = (path) => {\r\n  return new Promise((resolve, reject) => {\r\n    const request = superagent.get(Studio.resolveUrl(path))\r\n    request.end((err, { text } = {}) => err ? reject(new Error(text || err.toString())) : resolve(text))\r\n  })\r\n}\r\n\r\nexport default class FileEditor extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = { isMetaView: true }\r\n  }\r\n\r\n  async openEditor () {\r\n    const { entity } = this.props\r\n\r\n    var content = entity.content\r\n    if (entity.link && !entity.content && !this.state.loadFailed) {\r\n      try {\r\n        await Studio.saveEntity(entity._id)\r\n        content = btoa(await Studio.api.get(`assets/content/${entity.name}`, { parseJSON: false }))\r\n      } catch (e) {\r\n        this.setState({ loadFailed: true })\r\n        throw e\r\n      }\r\n    }\r\n\r\n    this.setState({ isMetaView: false, content: content })\r\n  }\r\n\r\n  async componentDidUpdate (prevProps) {\r\n    const { entity } = this.props\r\n\r\n    if (entity.link && (!this.state.link || prevProps.entity.link !== entity.link) && !this.state.loadFailed) {\r\n      try {\r\n        const link = await getTextFromApi(`assets/link/${entity.link}`)\r\n        this.setState({ link: link })\r\n      } catch (e) {\r\n        this.setState({ link: e.message })\r\n      }\r\n    }\r\n  }\r\n\r\n  isImage (entity) {\r\n    return entity.name.match(/\\.(jpeg|jpg|gif|png|svg)$/) != null\r\n  }\r\n\r\n  render () {\r\n    const { entity, onUpdate } = this.props\r\n    const { isMetaView, content, link } = this.state\r\n    const downloadUrl = Studio.resolveUrl(`assets/content/${entity.name}?download=true`)\r\n\r\n    let parts = entity.name.split('.')\r\n    let mode = parts[parts.length - 1]\r\n    if (mode === 'js') {\r\n      mode = 'javascript'\r\n    }\r\n    if (mode === 'html') {\r\n      mode = 'handlebars'\r\n    }\r\n\r\n    return (isMetaView ? <div className='custom-editor'>\r\n      <div><h1><i className='fa fa-file' /> {entity.name}</h1></div>\r\n      <p><i>assets extension is currently in beta</i></p>\r\n\r\n      {link ? <p>Asset is linked to file: {link}</p> : <div />}\r\n\r\n      {entity.isSharedHelper ? <p>Asset is marked as shared helper and will be part of every template helper functions</p> : <div />}\r\n\r\n      <div>\r\n        Embed into a template content, template helpers using or a custom script:\r\n        <code>\r\n          <h3 style={{textTransform: 'none'}}>\r\n            { '{#asset ' + entity.name + '}'}\r\n          </h3>\r\n\r\n          <h3 style={{textTransform: 'none'}}>\r\n            { '{#asset ' + entity.name + ' @encoding=utf8|base64|string|link|dataURI}'}\r\n          </h3>\r\n\r\n          {this.isImage(entity) ? <h3 style={{textTransform: 'none'}}>\r\n            { '<img src=\"{#asset ' + entity.name + ' @encoding=dataURI}\" />'}\r\n          </h3> : <span />}\r\n        </code>\r\n      </div>\r\n      <div>\r\n        <a className='button confirmation' target='_blank' href={downloadUrl}>\r\n          <i className='fa fa-download' /> Download file\r\n        </a>\r\n        {entity.link\r\n          ? <span /> : <button className='button confirmation' onClick={() => AssetUploadButton.OpenUpload()}><i className='fa fa-upload' />\r\n          Upload file</button>}\r\n        {this.isImage(entity) ? <span /> : <button className='button confirmation' onClick={() => this.openEditor()}>\r\n          <i className='fa fa-folder-open' /> Open in editor\r\n        </button>\r\n        }\r\n      </div>\r\n      <div style={{overflow: 'auto'}}>\r\n        {this.isImage(entity) ? <img src={Studio.resolveUrl(`assets/content/${entity.name}?v=${new Date().getTime()}`)} style={{display: 'block', margin: '3rem auto'}} /> : <span />}\r\n      </div>\r\n    </div> : <TextEditor\r\n      name={entity._id}\r\n      mode={mode}\r\n      value={atob(((entity.content || entity.forceUpdate) ? entity.content : content) || '')}\r\n      onUpdate={(v) => onUpdate(Object.assign({}, entity, {content: btoa(v), forceUpdate: true}))} />)\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/AssetEditor.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nlet _fileUploadButton\r\n\r\nexport default class AssetUploadButton extends Component {\r\n  // we need to have global action in main_dev which is triggered when users clicks on + on images\r\n  // this triggers invisible button in the toolbar\r\n  static OpenUpload () {\r\n    _fileUploadButton.openFileDialog('edit')\r\n  }\r\n\r\n  static OpenUploadNew () {\r\n    _fileUploadButton.openFileDialog('new')\r\n  }\r\n\r\n  componentDidMount () {\r\n    _fileUploadButton = this\r\n  }\r\n\r\n  upload (e) {\r\n    if (!e.target.files.length) {\r\n      return\r\n    }\r\n\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n\r\n    reader.onloadend = async () => {\r\n      this.refs.file.value = ''\r\n      if (this.type === 'new') {\r\n        if (Studio.workspaces) {\r\n          await Studio.workspaces.save()\r\n        }\r\n\r\n        let response = await Studio.api.post('/odata/assets', {\r\n          data: {\r\n            content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\r\n            name: file.name\r\n          }\r\n        })\r\n        response.__entitySet = 'assets'\r\n\r\n        Studio.addExistingEntity(response)\r\n        Studio.openTab(Object.assign({}, response))\r\n      }\r\n\r\n      if (this.type === 'edit') {\r\n        if (Studio.workspaces) {\r\n          Studio.updateEntity({\r\n            name: this.props.tab.entity.name,\r\n            content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)\r\n          })\r\n\r\n          await Studio.workspaces.save()\r\n        } else {\r\n          await Studio.api.patch(`/odata/assets(${this.props.tab.entity._id})`, {\r\n            data: {\r\n              content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\r\n              link: null\r\n            }\r\n          })\r\n          Studio.loadEntity(this.props.tab.entity._id, true)\r\n        }\r\n      }\r\n    }\r\n\r\n    reader.onerror = function () {\r\n      alert('There was an error reading the file!')\r\n    }\r\n\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  openFileDialog (type) {\r\n    this.type = type\r\n\r\n    this.refs.file.dispatchEvent(new MouseEvent('click', {\r\n      'view': window,\r\n      'bubbles': false,\r\n      'cancelable': true\r\n    }))\r\n  }\r\n\r\n  renderUpload () {\r\n    return <input type='file' key='file' ref='file' style={{display: 'none'}} onChange={(e) => this.upload(e)} />\r\n  }\r\n\r\n  render () {\r\n    return this.renderUpload(true)\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/AssetUploadButton.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = Studio.libraries['superagent'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['superagent']\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = Studio.libraries['bluebird'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['bluebird']\"\n ** module id = 6\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class NewAssetModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = { isLink: false }\r\n  }\r\n\r\n  async createAsset () {\r\n    let entity = {}\r\n\r\n    if (!this.state.isLink && (!this.refs.name.value || this.refs.name.value.indexOf('.')) < 0) {\r\n      return this.setState({ error: 'name should include file extension, for example foo.js' })\r\n    }\r\n\r\n    if (this.state.isLink) {\r\n      entity.link = this.refs.link.value\r\n    } else {\r\n      entity.name = this.refs.name.value\r\n    }\r\n\r\n    try {\r\n      let response = await Studio.api.post('/odata/assets', {\r\n        data: entity\r\n      })\r\n      response.__entitySet = 'assets'\r\n\r\n      Studio.addExistingEntity(response)\r\n      Studio.openTab(response)\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({ error: e.message })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { isLink, error } = this.state\r\n\r\n    return <div>\r\n      <div className='form-group'>\r\n        <label>link to existing file</label>\r\n        <input\r\n          type='checkbox' checked={isLink}\r\n          onChange={() => this.setState({ isLink: !isLink })} />\r\n      </div>\r\n      {isLink ? <div className='form-group'>\r\n        <label>Relative or absolute path to existing file</label>\r\n        <input type='text' name='link' ref='link' />\r\n      </div> : <div className='form-group'>\r\n        <label>Name</label>\r\n        <input type='text' name='name' ref='name' />\r\n      </div>\r\n      }\r\n      <div className='form-group'>\r\n        <span\r\n          style={{color: 'red', display: error ? 'block' : 'none'}}>{error}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button\r\n          className='button confirmation'\r\n          onClick={() => { this.props.close(); AssetUploadButton.OpenUploadNew() }}>Upload\r\n        </button>\r\n        <button className={'button confirmation'} onClick={() => this.createAsset()}>Ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/NewAssetModal.js\n **/","import React, { Component } from 'react'\r\n\r\nexport default class AssetProperties extends Component {\r\n\r\n  static title (entity, entities) {\r\n    return `asset ${entity.link ? '(link)' : ''}`\r\n  }\r\n\r\n  render () {\r\n    const { entity, onChange } = this.props\r\n\r\n    return (\r\n      <div>\r\n        <div className='form-group'>\r\n          <label>link</label>\r\n          <input type='text' value={entity.link || ''} onChange={(v) => onChange({_id: entity._id, link: v.target.value})} />\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>shared helpers attached to each template</label>\r\n          <input\r\n            type='checkbox' checked={entity.isSharedHelper === true}\r\n            onChange={(v) => onChange({_id: entity._id, isSharedHelper: v.target.checked})} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/AssetProperties.js\n **/"],"sourceRoot":""}