/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	var _AssetEditor = __webpack_require__(1);
	
	var _AssetEditor2 = _interopRequireDefault(_AssetEditor);
	
	var _AssetUploadButton = __webpack_require__(3);
	
	var _AssetUploadButton2 = _interopRequireDefault(_AssetUploadButton);
	
	var _NewAssetModal = __webpack_require__(7);
	
	var _NewAssetModal2 = _interopRequireDefault(_NewAssetModal);
	
	var _AssetProperties = __webpack_require__(8);
	
	var _AssetProperties2 = _interopRequireDefault(_AssetProperties);
	
	var _jsreportStudio = __webpack_require__(4);
	
	var _jsreportStudio2 = _interopRequireDefault(_jsreportStudio);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	_jsreportStudio2.default.addEntitySet({
	  name: 'assets',
	  faIcon: 'fa-file',
	  visibleName: 'asset',
	  onNew: function onNew() {
	    return _jsreportStudio2.default.openModal(_NewAssetModal2.default);
	  }
	});
	
	_jsreportStudio2.default.addEditorComponent('assets', _AssetEditor2.default);
	_jsreportStudio2.default.addToolbarComponent(_AssetUploadButton2.default);
	_jsreportStudio2.default.addPropertiesComponent(_AssetProperties2.default.title, _AssetProperties2.default, function (entity) {
	  return entity.__entitySet === 'assets';
	});
	
	_jsreportStudio2.default.entityTreeIconResolvers.push(function (entity) {
	  if (entity.__entitySet !== 'assets') {
	    return;
	  }
	
	  var parts = entity.name.split('.');
	
	  if (parts.length === 1) {
	    return;
	  }
	
	  var extension = parts[parts.length - 1];
	
	  switch (extension) {
	    case 'html':
	      return 'fa-html5';
	    case 'jpg':
	    case 'jpeg':
	    case 'png':
	    case 'gif':
	    case 'svg':
	      return 'fa-camera';
	    case 'js':
	      return 'fa-cog';
	    case 'css':
	      return 'fa-css3';
	  }
	});

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	var _react = __webpack_require__(2);
	
	var _react2 = _interopRequireDefault(_react);
	
	var _AssetUploadButton = __webpack_require__(3);
	
	var _AssetUploadButton2 = _interopRequireDefault(_AssetUploadButton);
	
	var _jsreportStudio = __webpack_require__(4);
	
	var _jsreportStudio2 = _interopRequireDefault(_jsreportStudio);
	
	var _superagent = __webpack_require__(5);
	
	var _superagent2 = _interopRequireDefault(_superagent);
	
	var _bluebird = __webpack_require__(6);
	
	var _bluebird2 = _interopRequireDefault(_bluebird);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2.default(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return _bluebird2.default.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }
	
	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
	
	// Studio.api currently always open dialogs on failures and that is what we don't want, so arbitrary implementaiton here
	var getTextFromApi = function getTextFromApi(path) {
	  return new _bluebird2.default(function (resolve, reject) {
	    var request = _superagent2.default.get(_jsreportStudio2.default.resolveUrl(path));
	    request.end(function (err) {
	      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
	          text = _ref.text;
	
	      return err ? reject(new Error(text || err.toString())) : resolve(text);
	    });
	  });
	};
	
	var FileEditor = function (_Component) {
	  _inherits(FileEditor, _Component);
	
	  function FileEditor() {
	    _classCallCheck(this, FileEditor);
	
	    var _this = _possibleConstructorReturn(this, (FileEditor.__proto__ || Object.getPrototypeOf(FileEditor)).call(this));
	
	    _this.state = { isMetaView: true };
	    return _this;
	  }
	
	  _createClass(FileEditor, [{
	    key: 'openEditor',
	    value: function () {
	      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {
	        var entity, content;
	        return regeneratorRuntime.wrap(function _callee$(_context) {
	          while (1) {
	            switch (_context.prev = _context.next) {
	              case 0:
	                entity = this.props.entity;
	                content = entity.content;
	
	                if (!(entity.link && !entity.content && !this.state.loadFailed)) {
	                  _context.next = 16;
	                  break;
	                }
	
	                _context.prev = 3;
	                _context.next = 6;
	                return _jsreportStudio2.default.saveEntity(entity._id);
	
	              case 6:
	                _context.next = 8;
	                return _jsreportStudio2.default.api.get('assets/content/' + entity.name, { parseJSON: false });
	
	              case 8:
	                _context.t0 = _context.sent;
	                content = btoa(_context.t0);
	                _context.next = 16;
	                break;
	
	              case 12:
	                _context.prev = 12;
	                _context.t1 = _context['catch'](3);
	
	                this.setState({ loadFailed: true });
	                throw _context.t1;
	
	              case 16:
	
	                this.setState({ isMetaView: false, content: content });
	
	              case 17:
	              case 'end':
	                return _context.stop();
	            }
	          }
	        }, _callee, this, [[3, 12]]);
	      }));
	
	      function openEditor() {
	        return _ref2.apply(this, arguments);
	      }
	
	      return openEditor;
	    }()
	  }, {
	    key: 'componentDidUpdate',
	    value: function () {
	      var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(prevProps) {
	        var entity, link;
	        return regeneratorRuntime.wrap(function _callee2$(_context2) {
	          while (1) {
	            switch (_context2.prev = _context2.next) {
	              case 0:
	                entity = this.props.entity;
	
	                if (!(entity.link && (!this.state.link || prevProps.entity.link !== entity.link) && !this.state.loadFailed)) {
	                  _context2.next = 12;
	                  break;
	                }
	
	                _context2.prev = 2;
	                _context2.next = 5;
	                return getTextFromApi('assets/link/' + entity.link);
	
	              case 5:
	                link = _context2.sent;
	
	                this.setState({ link: link });
	                _context2.next = 12;
	                break;
	
	              case 9:
	                _context2.prev = 9;
	                _context2.t0 = _context2['catch'](2);
	
	                this.setState({ link: _context2.t0.message });
	
	              case 12:
	              case 'end':
	                return _context2.stop();
	            }
	          }
	        }, _callee2, this, [[2, 9]]);
	      }));
	
	      function componentDidUpdate(_x2) {
	        return _ref3.apply(this, arguments);
	      }
	
	      return componentDidUpdate;
	    }()
	  }, {
	    key: 'isImage',
	    value: function isImage(entity) {
	      return entity.name.match(/\.(jpeg|jpg|gif|png|svg)$/) != null;
	    }
	  }, {
	    key: 'render',
	    value: function render() {
	      var _this2 = this;
	
	      var _props = this.props,
	          entity = _props.entity,
	          _onUpdate = _props.onUpdate;
	      var _state = this.state,
	          isMetaView = _state.isMetaView,
	          content = _state.content,
	          link = _state.link;
	
	      var downloadUrl = _jsreportStudio2.default.resolveUrl('assets/content/' + entity.name + '?download=true');
	
	      var parts = entity.name.split('.');
	      var mode = parts[parts.length - 1];
	      if (mode === 'js') {
	        mode = 'javascript';
	      }
	      if (mode === 'html') {
	        mode = 'handlebars';
	      }
	
	      return isMetaView ? _react2.default.createElement(
	        'div',
	        { className: 'custom-editor' },
	        _react2.default.createElement(
	          'div',
	          null,
	          _react2.default.createElement(
	            'h1',
	            null,
	            _react2.default.createElement('i', { className: 'fa fa-file' }),
	            ' ',
	            entity.name
	          )
	        ),
	        _react2.default.createElement(
	          'p',
	          null,
	          _react2.default.createElement(
	            'i',
	            null,
	            'assets extension is currently in beta'
	          )
	        ),
	        link ? _react2.default.createElement(
	          'p',
	          null,
	          'Asset is linked to file: ',
	          link
	        ) : _react2.default.createElement('div', null),
	        entity.isSharedHelper ? _react2.default.createElement(
	          'p',
	          null,
	          'Asset is marked as shared helper and will be part of every template helper functions'
	        ) : _react2.default.createElement('div', null),
	        _react2.default.createElement(
	          'div',
	          null,
	          'Embed into a template content, template helpers using or a custom script:',
	          _react2.default.createElement(
	            'code',
	            null,
	            _react2.default.createElement(
	              'h3',
	              { style: { textTransform: 'none' } },
	              '{#asset ' + entity.name + '}'
	            ),
	            _react2.default.createElement(
	              'h3',
	              { style: { textTransform: 'none' } },
	              '{#asset ' + entity.name + ' @encoding=utf8|base64|string|link|dataURI}'
	            ),
	            this.isImage(entity) ? _react2.default.createElement(
	              'h3',
	              { style: { textTransform: 'none' } },
	              '<img src="{#asset ' + entity.name + ' @encoding=dataURI}" />'
	            ) : _react2.default.createElement('span', null)
	          )
	        ),
	        _react2.default.createElement(
	          'div',
	          null,
	          _react2.default.createElement(
	            'a',
	            { className: 'button confirmation', target: '_blank', href: downloadUrl },
	            _react2.default.createElement('i', { className: 'fa fa-download' }),
	            ' Download file'
	          ),
	          entity.link ? _react2.default.createElement('span', null) : _react2.default.createElement(
	            'button',
	            { className: 'button confirmation', onClick: function onClick() {
	                return _AssetUploadButton2.default.OpenUpload();
	              } },
	            _react2.default.createElement('i', { className: 'fa fa-upload' }),
	            'Upload file'
	          ),
	          this.isImage(entity) ? _react2.default.createElement('span', null) : _react2.default.createElement(
	            'button',
	            { className: 'button confirmation', onClick: function onClick() {
	                return _this2.openEditor();
	              } },
	            _react2.default.createElement('i', { className: 'fa fa-folder-open' }),
	            ' Open in editor'
	          )
	        ),
	        _react2.default.createElement(
	          'div',
	          { style: { overflow: 'auto' } },
	          this.isImage(entity) ? _react2.default.createElement('img', { src: _jsreportStudio2.default.resolveUrl('assets/content/' + entity.name + '?v=' + new Date().getTime()), style: { display: 'block', margin: '3rem auto' } }) : _react2.default.createElement('span', null)
	        )
	      ) : _react2.default.createElement(_jsreportStudio.TextEditor, {
	        name: entity._id,
	        mode: mode,
	        value: atob((entity.content || entity.forceUpdate ? entity.content : content) || ''),
	        onUpdate: function onUpdate(v) {
	          return _onUpdate(Object.assign({}, entity, { content: btoa(v), forceUpdate: true }));
	        } });
	    }
	  }]);
	
	  return FileEditor;
	}(_react.Component);
	
	exports.default = FileEditor;

/***/ },
/* 2 */
/***/ function(module, exports) {

	module.exports = Studio.libraries['react'];

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	var _react = __webpack_require__(2);
	
	var _react2 = _interopRequireDefault(_react);
	
	var _jsreportStudio = __webpack_require__(4);
	
	var _jsreportStudio2 = _interopRequireDefault(_jsreportStudio);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }
	
	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
	
	var _fileUploadButton = void 0;
	
	var AssetUploadButton = function (_Component) {
	  _inherits(AssetUploadButton, _Component);
	
	  function AssetUploadButton() {
	    _classCallCheck(this, AssetUploadButton);
	
	    return _possibleConstructorReturn(this, (AssetUploadButton.__proto__ || Object.getPrototypeOf(AssetUploadButton)).apply(this, arguments));
	  }
	
	  _createClass(AssetUploadButton, [{
	    key: 'componentDidMount',
	    value: function componentDidMount() {
	      _fileUploadButton = this;
	    }
	  }, {
	    key: 'upload',
	    value: function upload(e) {
	      var _this2 = this;
	
	      if (!e.target.files.length) {
	        return;
	      }
	
	      var file = e.target.files[0];
	      var reader = new FileReader();
	
	      reader.onloadend = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {
	        var response;
	        return regeneratorRuntime.wrap(function _callee$(_context) {
	          while (1) {
	            switch (_context.prev = _context.next) {
	              case 0:
	                _this2.refs.file.value = '';
	
	                if (!(_this2.type === 'new')) {
	                  _context.next = 11;
	                  break;
	                }
	
	                if (!_jsreportStudio2.default.workspaces) {
	                  _context.next = 5;
	                  break;
	                }
	
	                _context.next = 5;
	                return _jsreportStudio2.default.workspaces.save();
	
	              case 5:
	                _context.next = 7;
	                return _jsreportStudio2.default.api.post('/odata/assets', {
	                  data: {
	                    content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),
	                    name: file.name
	                  }
	                });
	
	              case 7:
	                response = _context.sent;
	
	                response.__entitySet = 'assets';
	
	                _jsreportStudio2.default.addExistingEntity(response);
	                _jsreportStudio2.default.openTab(Object.assign({}, response));
	
	              case 11:
	                if (!(_this2.type === 'edit')) {
	                  _context.next = 21;
	                  break;
	                }
	
	                if (!_jsreportStudio2.default.workspaces) {
	                  _context.next = 18;
	                  break;
	                }
	
	                _jsreportStudio2.default.updateEntity({
	                  name: _this2.props.tab.entity.name,
	                  content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)
	                });
	
	                _context.next = 16;
	                return _jsreportStudio2.default.workspaces.save();
	
	              case 16:
	                _context.next = 21;
	                break;
	
	              case 18:
	                _context.next = 20;
	                return _jsreportStudio2.default.api.patch('/odata/assets(' + _this2.props.tab.entity._id + ')', {
	                  data: {
	                    content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),
	                    link: null
	                  }
	                });
	
	              case 20:
	                _jsreportStudio2.default.loadEntity(_this2.props.tab.entity._id, true);
	
	              case 21:
	              case 'end':
	                return _context.stop();
	            }
	          }
	        }, _callee, _this2);
	      }));
	
	      reader.onerror = function () {
	        alert('There was an error reading the file!');
	      };
	
	      reader.readAsDataURL(file);
	    }
	  }, {
	    key: 'openFileDialog',
	    value: function openFileDialog(type) {
	      this.type = type;
	
	      this.refs.file.dispatchEvent(new MouseEvent('click', {
	        'view': window,
	        'bubbles': false,
	        'cancelable': true
	      }));
	    }
	  }, {
	    key: 'renderUpload',
	    value: function renderUpload() {
	      var _this3 = this;
	
	      return _react2.default.createElement('input', { type: 'file', key: 'file', ref: 'file', style: { display: 'none' }, onChange: function onChange(e) {
	          return _this3.upload(e);
	        } });
	    }
	  }, {
	    key: 'render',
	    value: function render() {
	      return this.renderUpload(true);
	    }
	  }], [{
	    key: 'OpenUpload',
	
	    // we need to have global action in main_dev which is triggered when users clicks on + on images
	    // this triggers invisible button in the toolbar
	    value: function OpenUpload() {
	      _fileUploadButton.openFileDialog('edit');
	    }
	  }, {
	    key: 'OpenUploadNew',
	    value: function OpenUploadNew() {
	      _fileUploadButton.openFileDialog('new');
	    }
	  }]);
	
	  return AssetUploadButton;
	}(_react.Component);
	
	exports.default = AssetUploadButton;

/***/ },
/* 4 */
/***/ function(module, exports) {

	module.exports = Studio;

/***/ },
/* 5 */
/***/ function(module, exports) {

	module.exports = Studio.libraries['superagent'];

/***/ },
/* 6 */
/***/ function(module, exports) {

	module.exports = Studio.libraries['bluebird'];

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	var _react = __webpack_require__(2);
	
	var _react2 = _interopRequireDefault(_react);
	
	var _AssetUploadButton = __webpack_require__(3);
	
	var _AssetUploadButton2 = _interopRequireDefault(_AssetUploadButton);
	
	var _jsreportStudio = __webpack_require__(4);
	
	var _jsreportStudio2 = _interopRequireDefault(_jsreportStudio);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }
	
	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
	
	var NewAssetModal = function (_Component) {
	  _inherits(NewAssetModal, _Component);
	
	  function NewAssetModal() {
	    _classCallCheck(this, NewAssetModal);
	
	    var _this = _possibleConstructorReturn(this, (NewAssetModal.__proto__ || Object.getPrototypeOf(NewAssetModal)).call(this));
	
	    _this.state = { isLink: false };
	    return _this;
	  }
	
	  _createClass(NewAssetModal, [{
	    key: 'createAsset',
	    value: function () {
	      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {
	        var entity, response;
	        return regeneratorRuntime.wrap(function _callee$(_context) {
	          while (1) {
	            switch (_context.prev = _context.next) {
	              case 0:
	                entity = {};
	
	                if (!(!this.state.isLink && (!this.refs.name.value || this.refs.name.value.indexOf('.')) < 0)) {
	                  _context.next = 3;
	                  break;
	                }
	
	                return _context.abrupt('return', this.setState({ error: 'name should include file extension, for example foo.js' }));
	
	              case 3:
	
	                if (this.state.isLink) {
	                  entity.link = this.refs.link.value;
	                } else {
	                  entity.name = this.refs.name.value;
	                }
	
	                _context.prev = 4;
	                _context.next = 7;
	                return _jsreportStudio2.default.api.post('/odata/assets', {
	                  data: entity
	                });
	
	              case 7:
	                response = _context.sent;
	
	                response.__entitySet = 'assets';
	
	                _jsreportStudio2.default.addExistingEntity(response);
	                _jsreportStudio2.default.openTab(response);
	                this.props.close();
	                _context.next = 17;
	                break;
	
	              case 14:
	                _context.prev = 14;
	                _context.t0 = _context['catch'](4);
	
	                this.setState({ error: _context.t0.message });
	
	              case 17:
	              case 'end':
	                return _context.stop();
	            }
	          }
	        }, _callee, this, [[4, 14]]);
	      }));
	
	      function createAsset() {
	        return _ref.apply(this, arguments);
	      }
	
	      return createAsset;
	    }()
	  }, {
	    key: 'render',
	    value: function render() {
	      var _this2 = this;
	
	      var _state = this.state,
	          isLink = _state.isLink,
	          error = _state.error;
	
	
	      return _react2.default.createElement(
	        'div',
	        null,
	        _react2.default.createElement(
	          'div',
	          { className: 'form-group' },
	          _react2.default.createElement(
	            'label',
	            null,
	            'link to existing file'
	          ),
	          _react2.default.createElement('input', {
	            type: 'checkbox', checked: isLink,
	            onChange: function onChange() {
	              return _this2.setState({ isLink: !isLink });
	            } })
	        ),
	        isLink ? _react2.default.createElement(
	          'div',
	          { className: 'form-group' },
	          _react2.default.createElement(
	            'label',
	            null,
	            'Relative or absolute path to existing file'
	          ),
	          _react2.default.createElement('input', { type: 'text', name: 'link', ref: 'link' })
	        ) : _react2.default.createElement(
	          'div',
	          { className: 'form-group' },
	          _react2.default.createElement(
	            'label',
	            null,
	            'Name'
	          ),
	          _react2.default.createElement('input', { type: 'text', name: 'name', ref: 'name' })
	        ),
	        _react2.default.createElement(
	          'div',
	          { className: 'form-group' },
	          _react2.default.createElement(
	            'span',
	            {
	              style: { color: 'red', display: error ? 'block' : 'none' } },
	            error
	          )
	        ),
	        _react2.default.createElement(
	          'div',
	          { className: 'button-bar' },
	          _react2.default.createElement(
	            'button',
	            {
	              className: 'button confirmation',
	              onClick: function onClick() {
	                _this2.props.close();_AssetUploadButton2.default.OpenUploadNew();
	              } },
	            'Upload'
	          ),
	          _react2.default.createElement(
	            'button',
	            { className: 'button confirmation', onClick: function onClick() {
	                return _this2.createAsset();
	              } },
	            'Ok'
	          )
	        )
	      );
	    }
	  }]);
	
	  return NewAssetModal;
	}(_react.Component);
	
	NewAssetModal.propTypes = {
	  close: _react.PropTypes.func.isRequired
	};
	exports.default = NewAssetModal;

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	var _react = __webpack_require__(2);
	
	var _react2 = _interopRequireDefault(_react);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }
	
	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
	
	var AssetProperties = function (_Component) {
	  _inherits(AssetProperties, _Component);
	
	  function AssetProperties() {
	    _classCallCheck(this, AssetProperties);
	
	    return _possibleConstructorReturn(this, (AssetProperties.__proto__ || Object.getPrototypeOf(AssetProperties)).apply(this, arguments));
	  }
	
	  _createClass(AssetProperties, [{
	    key: 'render',
	    value: function render() {
	      var _props = this.props,
	          entity = _props.entity,
	          _onChange = _props.onChange;
	
	
	      return _react2.default.createElement(
	        'div',
	        null,
	        _react2.default.createElement(
	          'div',
	          { className: 'form-group' },
	          _react2.default.createElement(
	            'label',
	            null,
	            'link'
	          ),
	          _react2.default.createElement('input', { type: 'text', value: entity.link || '', onChange: function onChange(v) {
	              return _onChange({ _id: entity._id, link: v.target.value });
	            } })
	        ),
	        _react2.default.createElement(
	          'div',
	          { className: 'form-group' },
	          _react2.default.createElement(
	            'label',
	            null,
	            'shared helpers attached to each template'
	          ),
	          _react2.default.createElement('input', {
	            type: 'checkbox', checked: entity.isSharedHelper === true,
	            onChange: function onChange(v) {
	              return _onChange({ _id: entity._id, isSharedHelper: v.target.checked });
	            } })
	        )
	      );
	    }
	  }], [{
	    key: 'title',
	    value: function title(entity, entities) {
	      return 'asset ' + (entity.link ? '(link)' : '');
	    }
	  }]);
	
	  return AssetProperties;
	}(_react.Component);
	
	exports.default = AssetProperties;

/***/ }
/******/ ]);