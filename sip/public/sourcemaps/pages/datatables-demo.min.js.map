{"version":3,"sources":["pages/datatables-demo.js"],"names":["dataTablesDemo","init","this","bindUIActions","table","handleDataTables","handleSearchRecords","handleSelecter","handleClearSelected","buttons","container","appendTo","unwrap","$","DataTable","dom","extend","autoPrint","language","paginate","previous","next","autoWidth","ajax","deferRender","order","columns","data","className","orderable","searchable","columnDefs","targets","render","type","row","meta","id","img","name","self","on","e","filterBy","val","hasFilter","value","length","clearSelectedRows","search","draw","document","isChecked","prop","getSelectedInfo","$selectors","$selectedRow","$info","$badge","addClass","text","remove","prepend","trigger"],"mappings":"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","file":"../../javascript/pages/datatables-demo.min.js","sourcesContent":["// DataTables Demo\n// =============================================================\n\nconst dataTablesDemo = {\n\n  init () {\n\n    this.bindUIActions()\n\n  },\n\n  bindUIActions () {\n\n    // event handlers\n    this.table = this.handleDataTables()\n    this.handleSearchRecords()\n    this.handleSelecter()\n    this.handleClearSelected()\n\n    // add buttons\n    this.table.buttons().container()\n      .appendTo('#dt-buttons')\n      .unwrap()\n  },\n\n  handleDataTables () {\n    return $('#myTable').DataTable({\n      dom: `<'text-muted'Bi>\n        <'table-responsive'tr>\n        <'mt-4'p>`,\n      buttons: [\n        'copyHtml5',\n        { extend: 'print', autoPrint: false }\n      ],\n      language: {\n        paginate: {\n          previous: '<i class=\"fa fa-lg fa-angle-left\"></i>',\n          next: '<i class=\"fa fa-lg fa-angle-right\"></i>'\n        }\n      },\n      autoWidth: false,\n      ajax: 'assets/data/products.json',\n      deferRender: true,\n      order: [ 1, 'asc' ],\n      columns: [\n        { data: 'id', className: 'col-checker align-middle', orderable: false, searchable: false },\n        { data: 'name', className: 'align-middle' },\n        { data: 'inventory', className: 'align-middle' },\n        { data: 'variant', className: 'align-middle' },\n        { data: 'prices', className: 'align-middle' },\n        { data: 'sales', className: 'align-middle' },\n        { data: 'id', className: 'align-middle text-right', orderable: false, searchable: false }\n      ],\n      columnDefs: [{\n        targets: 0,\n        render: function (data, type, row, meta) {\n          return `<div class=\"custom-control custom-control-nolabel custom-checkbox\">\n            <input type=\"checkbox\" class=\"custom-control-input\" name=\"selectedRow[]\" id=\"p${row.id}\" value=\"${row.id}\">\n            <label class=\"custom-control-label\" for=\"p${row.id}\"></label>\n          </div>`\n        }\n      }, {\n        targets: 1,\n        render: function (data, type, row, meta) {\n          return `<a href=\"#${row.id}\" class=\"tile tile-img mr-1\">\n            <img class=\"img-fluid\" src=\"assets/images/dummy/img-${row.img}.jpg\" alt=\"Card image cap\">\n          </a>\n          <a href=\"#${row.id}\">${row.name}</a>`\n        }\n      }, {\n        targets: 6,\n        render: function (data, type, row, meta) {\n          return `<a class=\"btn btn-sm btn-secondary\" href=\"#${data}\"><i class=\"fa fa-pencil-alt\"></i></a>\n          <a class=\"btn btn-sm btn-secondary\" href=\"#${data}\"><i class=\"far fa-trash-alt\"></i></a>`\n        }\n      }]\n    })\n  },\n\n  handleSearchRecords () {\n    const self = this\n\n    $('#table-search, #filterBy').on('keyup change focus', function (e) {\n      let filterBy = $('#filterBy').val()\n      let hasFilter = filterBy  !== ''\n      let value = $('#table-search').val()\n\n      // clear selected rows\n      if (value.length && (e.type === 'keyup' || e.type === 'change' )) {\n        self.clearSelectedRows()\n      }\n\n      // reset search term\n      self.table\n        .search('')\n        .columns().search('')\n        .draw();\n\n      if (hasFilter) {\n        self.table\n          .columns(filterBy)\n          .search(value)\n          .draw();\n      } else {\n        self.table\n          .search(value)\n          .draw();\n      }\n    })\n  },\n\n  handleSelecter () {\n    const self = this\n\n    $(document).on('change', '#check-handle', function () {\n      const isChecked = $(this).prop('checked')\n      $('input[name=\"selectedRow[]\"]').prop('checked', isChecked)\n\n      // get info\n      self.getSelectedInfo()\n    })\n    .on('change', 'input[name=\"selectedRow[]\"]', function () {\n      const $selectors = $('input[name=\"selectedRow[]\"]')\n      const $selectedRow = $('input[name=\"selectedRow[]\"]:checked').length\n      const prop = $selectedRow === $selectors.length\n        ? 'checked'\n        : 'indeterminate'\n\n      // reset props\n      $('#check-handle')\n        .prop('indeterminate', false)\n        .prop('checked', false)\n\n      if ($selectedRow) {\n        $('#check-handle').prop(prop, true)\n      }\n\n      // get info\n      self.getSelectedInfo()\n    })\n  },\n\n  handleClearSelected () {\n    const self = this\n    // clear selected rows\n    $('#myTable').on('page.dt', function () {\n      self.clearSelectedRows()\n    })\n    $('#clear-search').on('click', function () {\n      self.clearSelectedRows()\n    })\n  },\n\n  getSelectedInfo () {\n    const $selectedRow = $('input[name=\"selectedRow[]\"]:checked').length\n    const $info = $('.thead-btn')\n    const $badge = $('<span/>')\n      .addClass('selected-row-info text-muted pl-1')\n      .text(`${$selectedRow} selected`)\n    // remove existing info\n    $('.selected-row-info').remove()\n    // add current info\n    if ($selectedRow) {\n      $info.prepend($badge)\n    }\n  },\n\n  clearSelectedRows () {\n    $('#check-handle')\n      .prop('indeterminate', false)\n      .prop('checked', false)\n      .trigger('change')\n  }\n}\n\ndataTablesDemo.init()\n"]}